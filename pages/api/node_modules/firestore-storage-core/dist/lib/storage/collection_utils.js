"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.CollectionUtils = void 0;
const utils_1 = require("./utils");
class CollectionUtils {
    static createPath(path) {
        return (() => {
            const _f = (...ids) => {
                return this.replacePathSegments(path, ...ids);
            };
            _f.path = path;
            const parts = path.split('/');
            _f.collectionGroup = parts[parts.length - 2];
            _f.collectionIdMap = utils_1.parsePath(path.replace(/\{|\}/g, ''));
            return _f;
        })();
    }
    static replacePathSegments(path, ...ids) {
        const arr = new Array(...ids);
        let lastArgument = false;
        return path.replace(/\/\{(\w+)\}/g, () => {
            const id = arr.shift();
            if (id) {
                return `/${id}`;
            }
            if (lastArgument) {
                throw new Error('Insufficient amount of arguments for ' + path);
            }
            lastArgument = true;
            return '';
        });
    }
}
exports.CollectionUtils = CollectionUtils;
//# sourceMappingURL=collection_utils.js.map